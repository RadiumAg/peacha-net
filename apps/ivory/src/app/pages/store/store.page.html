<div class="bgc" *ngrxLet="item$;let it">
	<div class="main">
		<div class="in" #bgc>
			<div class="left">
				<ng-container *ngrxLet="works$;let items">
					<div class="st"><img src="/assets/image/svg/store.svg" /> 我的仓库</div>
					<div class="show" *ngIf="items?.count>0">
						<div class="des" [class.focus]="item.id==it.id" *ngFor="let item of items.list" (click)="selectOne(item.id)">
							<img
								[attr.src]="item?.price==0?'/assets/image/work-card/free-tag.svg':item?.category?'/assets/image/work-card/ikon-tag.svg':'/assets/image/work-card/Live2D-tag.svg'"
								class="good-icon"
							/>
							<img [src]="item.cover" [attr.checked]="it.id===item.id?true:null" />
							<div class="name">{{item.name}}</div>
							<div class="buy-time">入库时间：{{item.createTime|date:'yyyy-MM-dd HH:mm'}}</div>
						</div>
					</div>
				</ng-container>
				<div class="page" *ngIf="workCount$.value>6">
					<ivo-pagination
						[total]="workCount$.value"
						[pageSize]="6"
						[currentPage]="(page$|async)"
						(onPageChange)="page($event)"
					></ivo-pagination>
				</div>
			</div>
			<div class="right">
				<ng-container *ngIf="workCount$.value>0">
					<div class="mai">
						<div class="first">
							<img [src]="it.cover" (click)="toWork(it.id,it.category)" />
							<div class="des">
								<span class="na">{{it.name}} </span>
								<span class="detail" [ngSwitch]="it.category"
									>类型：
									<ng-container *ngSwitchCase="0"> Live2D </ng-container>
									<ng-container *ngSwitchCase="1"> 插画 </ng-container>
								</span>
								<span class="detail">作者：{{it.seller_name}}</span>
								<span class="detail">获取时间：{{it?.list[0].createtime|date:"yyyy-MM-dd HH:mm"}}</span>
							</div>
						</div>
						<!-- <div class="b">
							<button (click)="downloadwork(it.list[0].id)">下载模型文件</button>
						</div> -->

						<div class="good" *ngFor="let item of it?.list">
							<ng-container *ngIf="!item.only_preview">
								<div class="aaa">
									<span class="name">
										<ng-container *ngIf="item.maxstock!=-1"> 商品文件 </ng-container>
										<ng-container *ngIf="item.maxstock===-1"> 免费分享文件 </ng-container>
									</span>
								</div>
								<div class="bbb">
									<!-- <span>购买时间：{{item.createtime|date:"yyyy-MM-dd HH:mm"}}</span> -->
									<span *ngIf="item.filesize!=0">文件大小：{{(item.filesize/ 1048576).toFixed(2)}}M</span>
									<span class="type" [ngSwitch]="item.maxstock" *ngIf="item.maxstock>0">
										<ng-container *ngSwitchCase="1"> 单次出售 </ng-container>
										<ng-container *ngSwitchDefault> 多次出售 </ng-container>
									</span>
								</div>
								<button [ngClass]="{no: item.filesize==0}" [disabled]="item.filesize==0" (click)="download(item.id)">
									<ng-container *ngIf="item.maxstock!=-1;else free"> 下载商品文件 </ng-container>
									<ng-template #free> 下载免费分享文件 </ng-template>
								</button>
							</ng-container>
						</div>
					</div>
				</ng-container>
			</div>
		</div>
	</div>
</div>
